"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[58],{3058:function(s,e,t){t.r(e),t.d(e,{default:function(){return U}});var r=t(5671),i=t(3144),o=t(136),n=t(5716),u=t(1413),l=t(2791),a=t(885),d="ProfileInfo_descriptionBlock__bFylV",c="ProfileInfo_userPhoto__6pcwK",f=t(4374),h=t(4353),p=t(184),x=function(s){var e=(0,l.useState)(!1),t=(0,a.Z)(e,2),r=t[0],i=t[1],o=(0,l.useState)(s.status),n=(0,a.Z)(o,2),u=n[0],d=n[1];(0,l.useEffect)((function(){d(s.status)}),[s.status]);return(0,p.jsxs)("div",{children:[!r&&(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Status:"})," ",(0,p.jsx)("span",{onDoubleClick:function(){i(!0)},children:s.status||"--------"})]}),r&&(0,p.jsx)("div",{children:(0,p.jsx)("input",{onChange:function(s){d(s.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),s.updateStatus(u)},value:u})})]})},j=t(1117),v=t(704),m=t(9234),b=(0,v.Z)({form:"edit-profile"})((function(s){var e=s.handleSubmit,t=s.error;return(0,p.jsxs)("form",{onSubmit:e,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("button",{children:"Save"}),t&&(0,p.jsx)("div",{className:m.Z.formSummaryError,children:t})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full name"}),":",(0,j.Gr)("Full name","fullName",[],j.II)]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job"}),":",(0,j.Gr)("","lookingForAJob",[],j.II,{type:"checkbox"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills"}),":",(0,j.Gr)("My professional skills","lookingForAJobDescription",[],j.gx)]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me"}),":",(0,j.Gr)("About me","aboutMe",[],j.gx)]})]})})),g=function(s){var e=s.profile,t=s.isOwner,r=s.goToEditMode;return(0,p.jsxs)("div",{children:[t&&(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:r,children:"Edit"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full name"}),":",e.fullName]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job"}),":",e.lookingForAJob?"Yes":"No"]}),e.lookingForAJob&&(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills"}),":",e.lookingForAJobDescription]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me"}),":",e.aboutMe]})]})},P=function(s){var e=s.profile,t=s.status,r=s.updateStatus,i=s.isOwner,o=s.savePhoto,n=s.saveProfile,u=(0,l.useState)(!1),j=(0,a.Z)(u,2),v=j[0],m=j[1];if(!e)return(0,p.jsx)(f.Z,{});return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:d,children:[(0,p.jsx)("img",{src:e.photos.small?e.photos.small:h,className:c,alt:"avatar"}),i&&(0,p.jsx)("input",{type:"file",onChange:function(s){s.target.files&&0!==s.target.files.length&&o(s.target.files[0])}}),v?(0,p.jsx)(b,{initialValues:e,onSubmit:function(s){n(s),m(!1)}}):(0,p.jsx)(g,{goToEditMode:function(){m(!0)},profile:e,isOwner:i}),(0,p.jsx)(x,{status:t,updateStatus:r})]})})},k=t(7828),S="MyPosts_postsBlock__eZLTq",Z="MyPosts_posts__BgJ1G",_="Post_item__CRBk1",y=function(s){var e=s.message,t=s.likesCount,r=s.profile;return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:_,children:[(0,p.jsx)("img",{src:r.photos.small,alt:""}),e,(0,p.jsx)("div",{children:(0,p.jsxs)("span",{children:["like ",t]})})]})})},A=t(6139),w=t(5298),C=l.memo((function(s){var e=s.posts.map((function(e){return(0,p.jsx)(y,{id:e.id,message:e.message,likesCount:e.likesCount,profile:s.profile},e.id)}));return(0,p.jsxs)("div",{className:S,children:[(0,p.jsx)("h3",{children:"My post"}),(0,p.jsx)(M,{onSubmit:function(e){s.addPost(e.newPostText)}}),(0,p.jsx)("div",{className:Z,children:e})]})})),I=(0,w.D)(10),M=(0,v.Z)({form:"ProfileAddNewPostForm"})((function(s){return(0,p.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,p.jsx)("div",{children:(0,p.jsx)(A.Z,{name:"newPostText",component:j.gx,validate:[w.C,I],placeholder:"Post message"})}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"Add"})})]})})),F=C,N=t(8687),O=(0,N.$j)((function(s){return{posts:s.profileReducer.posts,profile:s.profileReducer.profile,status:s.profileReducer.status}}),(function(s){return{addPost:function(e){s((0,k.Wl)(e))}}}))(F),T=function(s){return(0,p.jsxs)("div",{children:[(0,p.jsx)(P,{profile:s.profile,updateStatus:s.updateStatus,status:s.status,isOwner:s.isOwner,saveProfile:s.saveProfile,savePhoto:s.savePhoto}),(0,p.jsx)(O,{})]})},G=t(9271),D=t(2163),J=t(7781);var R=function(s){(0,o.Z)(t,s);var e=(0,n.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,i.Z)(t,[{key:"refreshProfile",value:function(){var s=this.props.router.params.userId;s||(s=this.props.authorizedUserId)||G.l_,this.props.getUserProfile(s),this.props.getStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e,t){this.props.router.params.userId!=s.router.params.userId&&(this.refreshProfile(),console.log(this.props.profile))}},{key:"render",value:function(){return(0,p.jsx)(T,(0,u.Z)((0,u.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,saveProfile:this.props.saveProfile,updateStatus:this.props.updateStatus,status:this.props.status,savePhoto:this.props.savePhoto}))}}]),t}(l.Component),U=(0,J.qC)((0,N.$j)((function(s){return{profile:s.profileReducer.profile,status:s.profileReducer.status,authorizedUserId:s.auth.id,isAuth:s.auth.isAuth}}),{getUserProfile:k.d$,getStatus:k.GP,updateStatus:k.OG,savePhoto:k.Tw,saveProfile:k.Ms}),(function(s){return function(e){var t=(0,G.TH)(),r=(0,G.UO)();return(0,p.jsx)(s,(0,u.Z)((0,u.Z)({},e),{},{router:{location:t,params:r}}))}}),D.e)(R)},2163:function(s,e,t){t.d(e,{e:function(){return d}});var r=t(1413),i=t(5987),o=(t(2791),t(9271)),n=t(8687),u=t(184),l=["isAuth"],a=function(s){return{isAuth:s.auth.isAuth}};function d(s){return(0,n.$j)(a)((function(e){e.isAuth;var t=(0,i.Z)(e,l);return e.isAuth?(0,u.jsx)(s,(0,r.Z)({},t)):(0,u.jsx)(o.l_,{to:"/login"})}))}}}]);
//# sourceMappingURL=58.32a0d453.chunk.js.map