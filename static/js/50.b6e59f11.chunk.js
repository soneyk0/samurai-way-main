"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[50],{5617:function(e,s,t){t.r(s),t.d(s,{default:function(){return W}});var o=t(5671),i=t(3144),r=t(136),a=t(5716),n=t(1413),l=t(2791),u=t(885),c={profilePhoto:"ProfileInfo_profilePhoto__1FrHD",selectedPage:"ProfileInfo_selectedPage__j3mWC",content:"ProfileInfo_content__Ivwxy",descriptionBlock:"ProfileInfo_descriptionBlock__bFylV",userPhoto:"ProfileInfo_userPhoto__6pcwK",changeFile:"ProfileInfo_changeFile__uEzDO",inputFileButton:"ProfileInfo_inputFileButton__D2lBK",profileBlock:"ProfileInfo_profileBlock__-it5m",profileData:"ProfileInfo_profileData__wf1XR",statusBlock:"ProfileInfo_statusBlock__Y8L9+",buttonEdit:"ProfileInfo_buttonEdit__l+hIb"},d=t(4374),f=t(4353),p=t(772),h="ProfileStatusWithHooks_noStatus__X53Bn",m=t(184),x=function(e){var s=(0,l.useState)(!1),t=(0,u.Z)(s,2),o=t[0],i=t[1],r=(0,l.useState)(e.status),a=(0,u.Z)(r,2),n=a[0],c=a[1];(0,l.useEffect)((function(){c(e.status)}),[e.status]);return(0,m.jsxs)("div",{children:[!o&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Status:"})," ",(0,m.jsx)("span",{onDoubleClick:function(){i(!0)},children:e.status||(0,m.jsxs)("span",{className:h,children:["Write your status ",(0,m.jsx)("img",{src:p,alt:"write status"})]})})]}),o&&(0,m.jsx)("div",{children:(0,m.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),e.updateStatus(n)},value:n,placeholder:"Write status"})})]})},j=t(1117),v=t(704),_=t(9234),P={profileEditData:"ProfileDataForm_profileEditData__qKBGD",checkboxItem:"ProfileDataForm_checkboxItem__QafIX",buttonSave:"ProfileDataForm_buttonSave__xTEXX"},g=t(1012),b=(0,v.Z)({form:"edit-profile"})((function(e){var s=e.handleSubmit,t=e.error;return(0,m.jsxs)("form",{onSubmit:s,children:[(0,m.jsx)("div",{children:t&&(0,m.jsx)("div",{className:_.Z.formSummaryError,children:t})}),(0,m.jsxs)("div",{className:P.profileEditData,children:[(0,m.jsx)("b",{className:P.filterName,children:"Full name"}),": ",(0,m.jsx)(m.Fragment,{children:(0,j.Gr)("Full name","fullName",[],j.II)})]}),(0,m.jsxs)("div",{className:P.profileEditData,children:[(0,m.jsx)("b",{children:"Looking for a job"}),":",(0,m.jsx)("span",{className:P.checkboxItem,children:(0,j.Gr)("","lookingForAJob",[],j.II,{type:"checkbox"})})]}),(0,m.jsxs)("div",{className:P.profileEditData,children:[(0,m.jsx)("b",{children:"My professional skills"}),":",(0,j.Gr)("My professional skills","lookingForAJobDescription",[],j.gx)]}),(0,m.jsxs)("div",{className:P.profileEditData,children:[(0,m.jsx)("b",{children:"About me"}),":",(0,j.Gr)("About me","aboutMe",[],j.gx)]}),(0,m.jsx)("div",{className:P.buttonSave}),(0,m.jsx)(g.Z,{title:"Save"})]})})),k=function(e){var s=e.profile,t=e.isOwner,o=e.goToEditMode;return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:c.profileData,children:[(0,m.jsx)("b",{children:"Full name"}),": ",(0,m.jsx)("span",{children:s.fullName})]}),(0,m.jsxs)("div",{className:c.profileData,children:[(0,m.jsx)("b",{children:"Looking for a job"}),": ",(0,m.jsx)("span",{children:s.lookingForAJob?"Yes":"No"})]}),s.lookingForAJob&&(0,m.jsxs)("div",{className:c.profileData,children:[(0,m.jsx)("b",{children:"My professional skills"}),": ",(0,m.jsx)("span",{children:s.lookingForAJobDescription})]}),(0,m.jsxs)("div",{className:c.profileData,children:[(0,m.jsx)("b",{children:"About me"}),": ",(0,m.jsx)("span",{children:s.aboutMe})]}),t&&(0,m.jsx)("div",{className:c.buttonEdit,children:(0,m.jsx)(g.Z,{title:"Edit",clickCallback:o})})]})},S=function(e){var s=e.profile,t=e.status,o=e.updateStatus,i=e.isOwner,r=e.savePhoto,a=e.saveProfile,n=(0,l.useState)(!1),p=(0,u.Z)(n,2),h=p[0],j=p[1];if(!s)return(0,m.jsx)(d.Z,{});return(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:c.descriptionBlock,children:[(0,m.jsxs)("div",{className:c.photoBlock,children:[(0,m.jsx)("img",{src:s.photos.large?s.photos.large:f,className:c.userPhoto,alt:"avatar"}),i&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("label",{htmlFor:"inputFile",className:c.inputFileButton,children:[(0,m.jsx)(g.Z,{title:"Add file"}),(0,m.jsx)("input",{name:"file",type:"file",id:"inputFile",style:{display:"none"},onChange:function(e){e.target.files&&0!==e.target.files.length&&r(e.target.files[0])}})]})})]}),(0,m.jsxs)("div",{className:c.profileBlock,children:[(0,m.jsx)("div",{className:c.statusBlock,children:(0,m.jsx)(x,{status:t,updateStatus:o})}),h?(0,m.jsx)(b,{initialValues:s,onSubmit:function(e){a(e),j(!1)}}):(0,m.jsx)(k,{goToEditMode:function(){j(!0)},profile:s,isOwner:i})]})]})})},I=t(7828),N="MyPosts_postsBlock__eZLTq",D="MyPosts_posts__BgJ1G",F="Post_item__CRBk1",y=function(e){var s=e.message,t=e.profile;return(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:F,children:[(0,m.jsx)("img",{src:t.photos.small?t.photos.small:f,alt:""}),s]})})},Z=t(6139),B=t(5298),w=t(8687),A=l.memo((function(e){var s=(0,w.I0)();(0,l.useEffect)((function(){var e=localStorage.getItem("posts");if(e){var t=JSON.parse(e);console.log(t),s((0,I.SQ)(t))}}),[]),(0,l.useEffect)((function(){localStorage.setItem("posts",JSON.stringify(e.posts))}),[e.posts]);var t=e.posts.map((function(s){return(0,m.jsx)("div",{children:(0,m.jsx)(y,{id:s.id,message:s.message,profile:e.profile},s.id)})}));return(0,m.jsxs)("div",{className:N,children:[(0,m.jsx)("h3",{children:"My post"}),(0,m.jsx)(M,{onSubmit:function(s){e.addPost(s.newPostText)}}),(0,m.jsx)("div",{className:D,children:t})]})})),E=(0,B.D)(10),M=(0,v.Z)({form:"ProfileAddNewPostForm"})((function(e){return(0,m.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,m.jsx)("div",{children:(0,m.jsx)(Z.Z,{name:"newPostText",component:j.gx,validate:[B.C,E],placeholder:"Post message"})}),(0,m.jsx)("div",{children:(0,m.jsx)("button",{children:"Add"})})]})})),C=A,O=(0,w.$j)((function(e){return{posts:e.profileReducer.posts,profile:e.profileReducer.profile,status:e.profileReducer.status}}),(function(e){return{addPost:function(s){e((0,I.Wl)(s))}}}))(C),T=function(e){return(0,m.jsxs)("div",{children:[(0,m.jsx)(S,{profile:e.profile,updateStatus:e.updateStatus,status:e.status,isOwner:e.isOwner,saveProfile:e.saveProfile,savePhoto:e.savePhoto}),(0,m.jsx)(O,{})]})},G=t(9271),J=t(2163),R=t(7781);var U=function(e){(0,r.Z)(t,e);var s=(0,a.Z)(t);function t(){return(0,o.Z)(this,t),s.apply(this,arguments)}return(0,i.Z)(t,[{key:"refreshProfile",value:function(){var e=this.props.router.params.userId;e||(e=this.props.authorizedUserId)||G.l_,this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,s,t){this.props.router.params.userId!=e.router.params.userId&&(this.refreshProfile(),console.log(this.props.profile))}},{key:"render",value:function(){return(0,m.jsx)(T,(0,n.Z)((0,n.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,saveProfile:this.props.saveProfile,updateStatus:this.props.updateStatus,status:this.props.status,savePhoto:this.props.savePhoto}))}}]),t}(l.Component),W=(0,R.qC)((0,w.$j)((function(e){return{profile:e.profileReducer.profile,status:e.profileReducer.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:I.d$,getStatus:I.GP,updateStatus:I.OG,savePhoto:I.Tw,saveProfile:I.Ms}),(function(e){return function(s){var t=(0,G.TH)(),o=(0,G.UO)();return(0,m.jsx)(e,(0,n.Z)((0,n.Z)({},s),{},{router:{location:t,params:o}}))}}),J.e)(U)},2163:function(e,s,t){t.d(s,{e:function(){return c}});var o=t(1413),i=t(5987),r=(t(2791),t(9271)),a=t(8687),n=t(184),l=["isAuth"],u=function(e){return{isAuth:e.auth.isAuth}};function c(e){return(0,a.$j)(u)((function(s){s.isAuth;var t=(0,i.Z)(s,l);return s.isAuth?(0,n.jsx)(e,(0,o.Z)({},t)):(0,n.jsx)(r.l_,{to:"/login"})}))}},772:function(e,s,t){e.exports=t.p+"static/media/writestatus.80e24f174968a6fc8722.png"}}]);
//# sourceMappingURL=50.b6e59f11.chunk.js.map